<h1 *ngIf="!isOrderDetailsVisible">Orders</h1>
<div class="container">
<table *ngIf="!isOrderDetailsVisible">
  <thead>
    <tr>
      <th>Shipping Address</th>
      <th>Order Date</th>
      <th>Total Amount</th>
      <th>Transaction Status</th>
      <th>Shipping Status</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let order of orders">
      <td>{{ order.shippingAddress.city }}</td>
      <td>{{ order.createdAt | date }}</td>
      <td>{{ order.totalPrice | currency }}</td>
      <td class="center">
        <div [ngClass]="order.transaction?.transactionStatus === 0 ? 'case-success' : 'case-danger'" class="cc">
          {{ order.transaction == null 
            ? 'Not Payed' 
            : dictionaries.TransactionStatus[order.transaction.transactionStatus]?.en }}
        </div>
      </td>
      <td>{{ dictionaries.ShippingStatus[order.shippingStatus].en }}</td>
      <td class="center">
        <div [ngClass]="getStatusClass(order.status)" class="cc">
          {{ dictionaries.OrderStatus[order.status].en }}
        </div>
      </td>
      <td>
        <div class="dropdown">
          <button (click)="toggleDropdown(order.orderId)" class="dropdown-button">â‹®</button>
          <div *ngIf="activeDropdown === order.orderId" class="dropdown-menu">
            <button (click)="displayOrderDetails(order)">Show Order Details</button>
            <button *ngIf="order.status === 0 && order.shippingStatus === 0" (click)="assinToDriver(order.orderId)">Assign Order to Driver</button>
          </div>
        </div>
      </td>
    </tr>
  </tbody>
</table>
<div *ngIf="isOrderDetailsVisible">
  <app-order-ditails *ngIf="selectedOrder" [order]="selectedOrder" (closeOrder)="closeOrderDetails()"></app-order-ditails>
</div>
<app-assginto-driver 
  *ngIf="assgintoDriver" 
  [orderId]="orderId" 
  (closeForm)="toggleAssgintoDriverProduct()" 
  (orderAssigned)="handleDriverAssigned($event)">
</app-assginto-driver>

</div>